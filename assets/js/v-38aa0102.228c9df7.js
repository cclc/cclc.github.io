"use strict";(self.webpackChunkcclc_vuepress=self.webpackChunkcclc_vuepress||[]).push([[2571],{8708:(t,e,o)=>{o.r(e),o.d(e,{data:()=>l});const l={key:"v-38aa0102",path:"/voice/google-assistant-smart-home-introduction.html",title:"Smart Home入门(1)",lang:"zh-CN",frontmatter:{title:"Smart Home入门(1)",date:"2021-11-5",categories:["Smart Home"],tags:["Smart Home","Google Assistant","AWS"]},excerpt:"",headers:[{level:2,title:"1.说明",slug:"_1-说明",children:[]},{level:2,title:"2.大致的实现方式",slug:"_2-大致的实现方式",children:[]},{level:2,title:"3.大致的结构图",slug:"_3-大致的结构图",children:[]},{level:2,title:"4.学习路线",slug:"_4-学习路线",children:[]}],git:{},filePathRelative:"voice/google-assistant-smart-home-introduction.md"}},2797:(t,e,o)=>{o.r(e),o.d(e,{default:()=>S});var l=o(6252);const a=(0,l._)("h1",{id:"smart-home入门-1",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#smart-home入门-1","aria-hidden":"true"},"#"),(0,l.Uk)(" Smart Home入门(1)")],-1),s=(0,l._)("p",null,[(0,l._)("strong",null,"基于 AWS 平台部署的用于处理 Smart Home 请求的后端服务")],-1),n={class:"table-of-contents"},r=(0,l._)("h2",{id:"_1-说明",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#_1-说明","aria-hidden":"true"},"#"),(0,l.Uk)(" 1.说明")],-1),i=(0,l._)("p",null,"通过云云对接的方式，实现用户通过 Google Home App 里的 Google Assistant 功能控制与他账号绑定了的设备。",-1),c=(0,l._)("h2",{id:"_2-大致的实现方式",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#_2-大致的实现方式","aria-hidden":"true"},"#"),(0,l.Uk)(" 2.大致的实现方式")],-1),m=(0,l._)("li",null,"将 OAuth2 服务部署在了 ECS 里",-1),d=(0,l._)("li",null,"使用运行环境为 Nodejs 的 Lambda 做逻辑处理, Lambda 的 trigger 为 API Gateway",-1),h={href:"https://console.actions.google.com/",target:"_blank",rel:"noopener noreferrer"},g=(0,l._)("code",null,"smarthomeaccountlinking",-1),u=(0,l._)("code",null,"clientID",-1),p=(0,l._)("code",null,"clientSecret",-1),_=(0,l._)("code",null,"Authorization URL",-1),f=(0,l._)("code",null,"Token URL",-1),b={href:"https://console.actions.google.com/",target:"_blank",rel:"noopener noreferrer"},k=(0,l._)("code",null,"actions/smarthome/",-1),v=(0,l._)("code",null,"Fulfillment URL",-1),x=(0,l._)("li",null,[(0,l.Uk)("在 API Gateway 上加入 Authorizer 功能用来鉴定"),(0,l._)("code",null,"Access Token"),(0,l.Uk)("是否有效，有效再去触发之后的业务 Lambda")],-1),y=(0,l.uE)('<p>例子:<br><code>Authorization URL</code>:<code>https://{your_domain}/oauth2/authorize</code><br><code>Token URL</code>:<code>https://{your_domain}/oauth2/token</code><br><code>Fulfillment URL</code>:<code>https://xxxxxxxxx.execute-api.us-east-1.amazonaws.com/feature/google/smarthome</code><br></p><h2 id="_3-大致的结构图" tabindex="-1"><a class="header-anchor" href="#_3-大致的结构图" aria-hidden="true">#</a> 3.大致的结构图</h2><p><img src="/blog_images/google-assistant-smart-home-introduction/1.png" alt="1"></p><h2 id="_4-学习路线" tabindex="-1"><a class="header-anchor" href="#_4-学习路线" aria-hidden="true">#</a> 4.学习路线</h2><table><thead><tr><th style="text-align:left;">网址</th><th style="text-align:left;">内容</th></tr></thead><tbody><tr><td style="text-align:left;">1.https://developers.google.com/assistant/smarthome/overview <br> 2.https://developers.google.com/assistant/smarthome/concepts</td><td style="text-align:left;">1.Smart Home 简介 <br> 2.Smart Home 里的相关概念总结，这些概念对开发很重要，需要很清晰地理解，下面的链接会详细介绍各种概念</td></tr><tr><td style="text-align:left;">1.https://developers.google.com/assistant/smarthome/concepts/homegraph</td><td style="text-align:left;">1.Home Graph 的概念</td></tr><tr><td style="text-align:left;">1.https://developers.google.com/assistant/smarthome/concepts/devices-traits <br> 2.https://developers.google.com/assistant/smarthome/guides <br> 3.https://developers.google.com/assistant/smarthome/traits</td><td style="text-align:left;">1.Device Types 和 Device Traits 的简介 <br> 2.Google Smart Home 支持的 Device Types，以及每种 Device Type 推荐的 Device Traits（Reference 文档）<br>3.Google Smart Home 支持的 Device Traits（Reference 文档）</td></tr><tr><td style="text-align:left;">1.https://developers.google.com/assistant/smarthome/concepts/intents</td><td style="text-align:left;">1.Smart home intents 的概念，Google Smart Home 支持的四种 intents：SYNC、QUERY、EXECUTE、DISCONNECT</td></tr><tr><td style="text-align:left;">1.https://developers.google.com/assistant/smarthome/concepts/fulfillment-authentication <br> 2.https://developers.google.com/assistant/smarthome/concepts/local</td><td style="text-align:left;">1.Fulfillment 的概念 <br> 2.Local Fulfillment/Local Home SDK 的介绍</td></tr><tr><td style="text-align:left;">1.https://developers.google.com/assistant/smarthome/concepts/account-linking <br> 补充：<br> 1.http://www.ruanyifeng.com/blog/2019/04/oauth_design.html <br> 2.http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html</td><td style="text-align:left;">将我们平台的账户关联到 Google Home 的相关介绍，Google Smart Home 只接受 OAuth。 <br> 访问我们的服务（Cloud Fulfillment）都需要 Access Token，这个 Access Token 就是用户登录时，OAuth 服务器返回给 Google Smart Home 的 Token。当 Google Smart Home 接收请求，进行语言处理、通过 grammar 解析出 intent，并将 intent 发送给 Cloud Fulfillment 时，会携带这个 Access Token。<br> 补充：<br> 1.关于 OAuth 2.0 的介绍 <br> 2.OAuth 2.0 的 4 种方式</td></tr></tbody></table>',5),U={},S=(0,o(3744).Z)(U,[["render",function(t,e){const o=(0,l.up)("RouterLink"),U=(0,l.up)("ExternalLinkIcon");return(0,l.wg)(),(0,l.iD)(l.HY,null,[a,s,(0,l._)("nav",n,[(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Wm)(o,{to:"#_1-说明"},{default:(0,l.w5)((()=>[(0,l.Uk)("1.说明")])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(o,{to:"#_2-大致的实现方式"},{default:(0,l.w5)((()=>[(0,l.Uk)("2.大致的实现方式")])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(o,{to:"#_3-大致的结构图"},{default:(0,l.w5)((()=>[(0,l.Uk)("3.大致的结构图")])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(o,{to:"#_4-学习路线"},{default:(0,l.w5)((()=>[(0,l.Uk)("4.学习路线")])),_:1})])])]),r,i,c,(0,l._)("ol",null,[m,d,(0,l._)("li",null,[(0,l.Uk)("在"),(0,l._)("a",h,[(0,l.Uk)("https://console.actions.google.com/"),(0,l.Wm)(U)]),(0,l.Uk)("里的"),g,(0,l.Uk)("path 下配置 OAuth2 的"),u,(0,l.Uk)(", "),p,(0,l.Uk)(", "),_,(0,l.Uk)(" 和 "),f]),(0,l._)("li",null,[(0,l.Uk)("将 API Gateway 上 Lambda 对外的访问地址配置到"),(0,l._)("a",b,[(0,l.Uk)("https://console.actions.google.com/"),(0,l.Wm)(U)]),(0,l.Uk)("里的"),k,(0,l.Uk)("path 下的"),v]),x]),y],64)}]])},3744:(t,e)=>{e.Z=(t,e)=>{const o=t.__vccOpts||t;for(const[t,l]of e)o[t]=l;return o}}}]);